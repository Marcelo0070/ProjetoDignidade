{% extends "base.html" %}
{% block titulo %}Cadastro de Família{% endblock %}
{% block conteudo %}

<div class="form-fundo">

    <div class="form-titulo">
        <h2>Cadastro de Família</h2>
        <p class="subtitulo-form">Preencha os dados da família, incluindo o responsável e seus membros.</p>
    </div>

    <form method="POST" autocomplete="off">

        <!-- Dados do responsável -->
        <div class="form-card"><label for="responsavel">Responsável pelo domicílio*:</label><input id="responsavel" type="text" name="responsavel" value="{{ dados.responsavel if dados else '' }}" onblur="aplicarCapitalizacao(this)" required></div>
        <div class="form-card"><label for="documento">Documento do responsável*:</label><input id="documento" type="text" name="documento" value="{{ dados.documento if dados else '' }}" required></div>
        <div class="form-card"><label for="data_nascimento">Data de nascimento do responsável*:</label><input id="data_nascimento" type="date" name="data_nascimento" value="{{ dados.data_nascimento if dados else '' }}" required onblur="verificarIdade()"></div>
        <div class="form-card"><label for="contato">Contato*:</label><input id="contato" type="text" name="contato" value="{{ dados.contato if dados else '' }}" required></div>
        <div class="form-card"><label for="rua_numero">Rua / Número*:</label><input id="rua_numero" type="text" name="rua_numero" value="{{ dados.rua_numero if dados else '' }}" required></div>
        <div class="form-card"><label for="bairro">Bairro*:</label><input id="bairro" type="text" name="bairro" value="{{ dados.bairro if dados else '' }}" required></div>
        <div class="form-card"><label for="cidade">Cidade*:</label><input id="cidade" type="text" name="cidade" value="{{ dados.cidade if dados else '' }}" required></div>
        <div class="form-card"><label for="estado">Estado*:</label><input id="estado" type="text" name="estado" value="{{ dados.estado if dados else '' }}" required></div>
        <div class="form-card"><label for="observacoes">Observações:</label><textarea id="observacoes" name="observacoes">{{ dados.observacoes if dados else '' }}</textarea></div>

        <!-- Familiares -->
        <div class="form-card">
            <label>Familiares:</label>
            <div id="membros"></div>
            <button type="button" class="btn-adicionar" onclick="adicionarMembro()">+ Adicionar familiar</button>
        </div>

        <!-- Ações -->
        <div class="form-acoes">
            <button type="submit" class="btn-enviar">Salvar Família</button>
            <a href="#" onclick="document.querySelector('form').reset(); return false;" class="link-limpar">Limpar formulário</a>
        </div>
    </form>
</div>

{% endblock %}
